---
layout: default
title: Formulae
---


<h1 id="formulas">Formulas</h1>
<h2 id="the-basic-formula">The basic formula</h2>
<p>A formula in R is an object that is a symbolic expression of a relationship between one or more response or dependent variables (on the left), and one or more predictors or independent variables (on the right), with a tilde ~ separating the two sides.</p>
<p>E.g., <code>response variable ~ explanatory variables</code></p>
<p>Thus, a basis regression analysis is: <code>y ~ x</code></p>
<p>Additional variables can added to make a multiple regression. <code>y ~ x + z</code></p>
<p>By fitting this model in R, we are actually estimating the parameters of the statistical model:</p>
<p>y ~ beta<sub>1</sub>x + beta<sub>2</sub>z + error</p>
<p>The formula we write does not explicitly include the intercept or the error term.</p>
<p>The error is assumed to be normal for regular regression models. We will specify it explicitly in <a href="">generalized linear models</a>.</p>
<p>The intercept is implicit in the model, but we can specify it explicitly:</p>
<pre><code>y ~ 1 + x + z</code></pre>
<p>To specify a model without an intercept, we can either add a <code>0</code> or <code>-1</code></p>
<pre><code>y ~ 0 + x + z

y ~ -1 + x + z</code></pre>
<h2 id="terms">Terms</h2>
<p>The terms on either side of a formula can be any of 3 types:</p>
<ul>
<li><p>A numeric vector, implying a single coefficient (e.g., slope beta)</p></li>
<li><p>A factor or ordered factor, implying one coefficient for each level</p></li>
<li><p>A matrix, implying a coefficient for each column</p></li>
</ul>
<p>Functions can modify the variables in a formula. E.g., <code>age &gt; 40</code></p>
<h2 id="symbolic-operators">Symbolic operators</h2>
<table>
            <tbody><tr class="naturalresource">
                <th style="width:80px; text-align:center;">
Sybmol
</th>
                <th style="width:400px;">
Use
</th>
            </tr>
            <tr>
                <td class="BrownFormula" style="text-align:center;">
+
</td>
                <td>
separate effects in a formula
</td>
            </tr>
            <tr>
                <td class="BrownFormula" style="text-align:center;">
:
</td>
                <td>
interaction (A:B is interaction of A and B)
</td>
            </tr>
            <tr>
                <td class="BrownFormula" style="text-align:center;">
*
</td>
                <td>
main effects plus interactions A*B is equivalent to A + B + A:B
</td>
            </tr>
            <tr>
                <td class="BrownFormula" style="text-align:center;">
^
</td>
                <td>
crossed
</td>
            </tr>
            <tr>
                <td class="BrownFormula" style="text-align:center;">
%in%
</td>
                <td>
nested within
</td>
            </tr>
            <tr>
                <td class="BrownFormula" style="text-align:center;">
/
</td>
                <td>
nested within
</td>
            </tr>
            <tr>
                <td class="BrownFormula" style="text-align:center;">
|
</td>
                <td>
conditional on; defines separate panels or shingles in lattice
</td>
            </tr>
            </tbody></table>

<h2 id="example-right-side-of-formulas">Example right side of formulas</h2>
<table>
            <tbody><tr class="naturalresource">
                <th style="width:200px;">
Right Side of Formula
</th>
                <th style="width:400px;">
Meaning
</th>
            </tr>
            <tr>
                <td class="BrownFormula">
A + B
</td>
                <td>
main effects of A and B
</td>
            </tr>
            <tr>
                <td class="BrownFormula">
A:B
</td>
                <td>
interaction of A with B
</td>
            </tr>
            <tr>
                <td class="BrownFormula">
A*B
</td>
                <td>
main effects and interactions = A + B + A:B
</td>
            </tr>
            <tr>
                <td class="BrownFormula">
A<em>B</em>C
</td>
                <td>
main effects and interactions A+B+C+A:B+A:C+B:C+A:B:C
</td>
            </tr>
            <tr>
                <td class="BrownFormula">
(A+B+C)^2
</td>
                <td>
A, B, and C crossed to level 2: A+B+C+A:B+A:C+B:C
</td>
            </tr>
            <tr>
                <td class="BrownFormula">
A<em>B</em>C-A:B:C
</td>
                <td>
same as above: main effects plus 2-way interactions
</td>
            </tr>
            <tr>
                <td class="BrownFormula">
1 + state + state:county
</td>
                <td>
nested ANOVA
</td>
            </tr>
            <tr>
                <td class="BrownFormula">
1 + state + county%in%state
</td>
                <td>
nested ANOVA emphasizing county nested in state
</td>
            </tr>
            <tr>
                <td class="BrownFormula">
state / county
</td>
                <td>
nested ANOVA
</td>
            </tr>
            <tr>
                <td class="BrownFormula">
(1 / subject)
</td>
                <td>
fit random intercepts for subjects
</td>
            </tr>
            <tr>
                <td class="BrownFormula">
(1+time / subject)
</td>
                <td>
fit both random intercepts and random subject-specific slopes
</td>
            </tr>
        </tbody></table>







<hr />
<p>Updated: 2017-11-03</p>
